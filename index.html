<!doctype html>

<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Little Man Computer</title>
</head>

<body>

    <header>
        <h1>Comment fonctionne un ordinateur ?</h1>
    </header>

    <div id="content">
        <section>
            <div class="title">Exemple du Little Man Computer</div>
            <div class="content">
                <p> 
                    Le Little Man Computer est un modèle éducatif d'ordinateur qui a été inventé dans les années 60 par le Dr. Stuart Madnick.
                    Il s'agit d'une pièce dans laquelle il y a un petit bonhomme, 100 boîtes à lettres
                    numérotées de 0 à 99 et quatre boîtes spéciales marquées Entrée, Sortie, Compteur d'instruction et Accumulateur.
                    Sur cette page vous pourrez simuler le fonctionnement d'un Little Man Computer.
                </p>
                
                <p>
                    Les boîtes représentent la mémoire du Little Man Computer.
                    Le numéro d'une boîte est ce qu'on appelle son adresse, donc lorsque l'on dit "la valeur à l'adresse A", 
                    c'est la même chose que "le nombre qui est dans la boîte numéro A".
                    Les ordinateurs modernes ont bien plus de 100 cases dans leur mémoire, par exemple celui que j'utilise en a précisément 16241912.
                    Les deux boîtes spéciales entrée et sortie permettent au Little Man Computer de communiquer avec l'extérieur de la pièce,
                    c'est avec le même système que l'on interagit avec les ordinateurs lorsque l'on utilise un clavier ou un écran.
                </p> 

                <p>
                    Pour programmer l'ordinateur, on lui donne une série d'instructions élémentaires à effectuer (addition, soustraction, déplacer des valeurs dans la mémoire, ...).
                    Ces instructions sont codés en nombres qui sont mis dans la mémoire, 
                    il n'y a donc pas de différence entre les instructions et les données.

                    Pour faire fonctionner l'ordinateur, le petit bonhomme a un tableau qui explique le codage des instructions.
                    D'abord, il prend le nombre qui se trouve dans la boîte dont le numéro est indiqué par le compteur d'instruction.
                    Ensuite il regarde dans le tableau l'action qu'il doit effectuer.
                    Enfin, il passe à l'instruction suivante en ajoutant 1 au compteur d'instruction.
                </p>

                <p>Plus d'informations sur la <a href="https://fr.wikipedia.org/wiki/Little_man_computer" target="_blank">page Wikipédia</a> à propos du Little Man Computer.</p>
           	</div>
        </section>

 
        <section>
            <div class="title">Jeu d'instructions</div>
            <div class="content">
                <p>
                   Plusieurs personnes ont codé de différentes manières les instructions de leur Little Man Computer, 
                   mais tout le monde est d'accord pour les représenter par des nombres entre 0 et 999,
                   avec les deux derniers chiffre qui peuvent donner un numéro de boîte. 
                   Voilà les instructions qu'utilise ma version du Little Man Computer :
                </p>
                <p><a href="littleManComputer.pdf" target="_blank">Version PDF</a></p>

                <table id="instructions">
                    <tr> 
                        <th>Code</th>
                        <th>Nom</th>
                        <th>Mnémonique</th>
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td>000</td>
                        <td>Arrêt</td>
                        <td>HLT</td>
                        <td>Arrêter l'exécution du programme, le compteur d'instruction n'est pas incrémenté.</td>
                    </tr>
                    <tr>
                        <td>001</td>
                        <td>Entrée</td>
                        <td>INP</td>
                        <td>Prendre le nombre qui est dans la boîte d'entrée et le mettre dans l'accumulateur.</td>
                    </tr>
                    <tr>
                        <td>002</td>
                        <td>Sortie</td>
                        <td>OUT</td>
                        <td>Prendre le nombre qui est dans l'accumulateur et le mettre dans la boîte de sortie.</td>
                    </tr>
                    <tr>
                        <td>100 à 199</td>
                        <td>Sauvegarde</td>
                        <td>STA</td>
                        <td>Prendre le nombre qui est dans l'accumulateur et le mettre à l'adresse formée par les deux derniers chiffres du code.</td>
                    </tr>
                    <tr>
                        <td>200 à 299</td>
                        <td>Chargement</td>
                        <td>LDA</td>
                        <td>Prendre le nombre dans la boîte à l'adresse formée par les deux derniers chiffres du code et le mettre dans l'accumulateur.</td>
                    </tr>
                    <tr>
                        <td>300 à 399</td>
                        <td>Addition</td>
                        <td>ADD</td>
                        <td>Ajouter à l'accumulateur la valeur à l'adresse formée par les deux derniers chiffres du code.</td>
                    </tr>
                    <tr>
                        <td>400 à 499</td>
                        <td>Soustraction</td>
                        <td>SUB</td>
                        <td>Soustraire à l'accumulateur la valeur à l'adresse formée par les deux derniers chiffres du code.</td>
                    </tr>
                    <tr>
                        <td>500 à 599</td>
                        <td>Saut</td>
                        <td>BRA</td>
                        <td>Mettre dans le compteur d'instruction le nombre formé par les deux derniers chiffres du code. Ne pas incrémenter le compteur d'instruction. </td>
                    </tr>
                    <tr>
                        <td>600 à 699</td>
                        <td>Saut si zéro</td>
                        <td>BRZ</td>
                        <td>Si la valeur de l'accumulateur est égale à zéro alors faire BRA, sinon incrémenter le compteur d'instruction uniquement si le saut n'a pas eu lieu.</td>
                    </tr>
                    <tr>
                        <td>700 à 799</td>
                        <td>Saut si positif</td>
                        <td>BRP</td>
                        <td>Si la valeur de l'accumulateur est supérieure ou égale à zéro alors faire BRA, sinon incrémenter le compteur d'instruction uniquement si le saut n'a pas eu lieu.</td>
                    </tr>
                    <tr>
                        <td>800 à 899</td>
                        <td>Saut si négatif</td>
                        <td>BRN</td>
                        <td>Si la valeur de l'accumulateur est strictement inférieure à zéro alors faire BRA, sinon incrémenter le compteur d'instruction uniquement si le saut n'a pas eu lieu.</td>
                    </tr>
                </table>
                
            </div>
        </section>

        <section>
            <div class="title">Le simulateur</div>
            <div class="content">
                <p>
                    La case jaune est celle que pointe le compteur d'instruction, 
                    c'est l'instruction qui va être effectuée en cliquant sur le bouton "Instruction suivante". 
                    À chaque instruction un message apparaît pour expliquer ce qu'il vient de se produire.
                    Le bouton "Remise à zéro" met des zéros dans le compteur et dans l'accumulateur
                    mais pas la mémoire.
                </p>

                <button onclick="step();">Instruction suivante</button>
                <button onclick="reset_regs();">Remise à zéro</button>
    
                <div id="regs"> 
                    <div class="label">Compteur d'instruction</div>
                    <input id="reg_ip" type="text" readonly>

                    <div class="label">Accumulateur</div>
                    <input id="reg_acc" type="text" readonly>
                
                    <div class="label">Message de l'ordinateur</div>
                    <textarea id="log" readonly rows="3" cols="10"></textarea>
                </div>


                <button onclick="reset_mem();">Remise à zéro mémoire</button>
                <button onclick="load_example(examples.add);">Exemple addition</button>
                <button onclick="load_example(examples.mul);">Exemple multiplication</button>
                <button onclick="load_example(examples.fib);">Exemple Fibonacci</button>
                <table id="memory"></table>
            </div>  
        </section>
<!--
        <section>
            <div class="title">Le code assembleur</div>
            <div class="content">
                <p>TODO: c'est quoi</p>
                <p>TODO: l'assembleur/le compilateur, un programme qui fabrique des programmes</p>
                <p>TODO: labels</p>
                <p>TODO: code des 3 exemples</p>
            </div>  
        </section>
    </div> 
    <script src="script.js"></script>
    <script>init();</script>
-->
</body>
</html>

