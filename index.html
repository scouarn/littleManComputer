<!doctype html>

<html lang="fr">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <title>Little Man Computer</title>
</head>

<body>

    <header>
        <h1>Comment fonctionne un ordinateur ?</h1>
    </header>

    <div id="content">
        <section>
            <div class="title">Exemple du Little Man Computer</div>
            <div class="content">
                <p> 
                    Le Little Man Computer est un modèle éducatif d'ordinateur qui a été inventé dans les années 60 par le Dr. Stuart Madnick.
                    Il s'agit d'une pièce dans laquelle il y a un petit bonhomme, 100 boîtes à lettres
                    numérotées de 0 à 99 et quatre boîtes spéciales marquées Entrée, Sortie, Compteur d'instruction et Accumulateur.
                    Le numéro d'une boîte est ce qu'on appelle son adresse.
                </p>
                <p>
                    De manière générale les ordinateurs ne savent utiliser que des 1 et des 0 mais pour des raisons de simplicité le Little Man Computer utilise
                    aussi des 2, des 3, des 4, des 5, des 6, des 7, des 8 et même des 9. 
                    Sur cette page vous pourrez simuler le fonctionnement d'un Little Man Computer.
                </p>

                <p>
                    Les boîtes représentent la mémoire du Little Man Computer.
                    Quand on dit "la valeur à l'adresse A", c'est la même chose que "le nombre qui est dans la boîte numéro A".
                    Dans les ordinateurs modernes il y a bien plus de 100 cases, par exemple dans celui que j'utilise il y en a précisément 16241912.
                </p> 

                <p>
                    Pour programmer l'ordinateur, on lui donne une série d'instructions élémentaires à effectuer (addition, soustraction, déplacer des valeurs dans la mémoire, ...).
                    Ces instructions sont codés en nombres qui sont mis dans la mémoire, 
                    il n'y a donc pas de différence entre les instructions et les données.
                </p>

                <p>
                    Pour utiliser l'ordinateur, le petit bonhomme a un tableau avec des instruction.
                    D'abord, il prend le nombre qui se trouve dans la boîte dont le numéro est indiqué par le compteur d'instruction.
                    Ensuite il regarde dans le tableau l'action qu'il doit effectuer.
                    Enfin, il passe à l'instruction suivante en ajoutant 1 au compteur d'instruction.
                </p>

                <p>TODO: + d'exemples de programmes</p>
                <p>TODO: sources</p>
           	</div>
        </section>

 
        <section>
            <div class="title">Jeu d'instructions</div>
            <div class="content">
                <p>
                   Plusieurs personnes ont codé de différentes manières les instructions de leur Little Man Computer, 
                   mais tout le monde est d'accord pour les représenter par des nombres entre 0 et 999 
                   avec les deux derniers chiffre qui peuvent donner un numéro de boîte. 
                   Voilà les instructions qu'utilise ma version du Little Man Computer :
                </p>
                <p><a href="littleManComputer.pdf" target="_blank">Version PDF</a></p>

                <table id="instructions">
                    <tr> 
                        <th>Code</th>
                        <th>Nom</th>
                        <th>Mnémonique</th>
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td>000</td>
                        <td>Arrêt</td>
                        <td>HLT</td>
                        <td>Arrêter l'exécution du programme, le numéro d'instruction n'est pas incrémenté.</td>
                    </tr>
                    <tr>
                        <td>001</td>
                        <td>Entrée</td>
                        <td>INP</td>
                        <td>Prendre le nombre qui est dans la boîte d'entrée et le mettre dans l'accumulateur.</td>
                    </tr>
                    <tr>
                        <td>002</td>
                        <td>Sortie</td>
                        <td>OUT</td>
                        <td>Prendre le nombre qui est dans l'accumulateur et le mettre dans la boîte de sortie.</td>
                    </tr>
                    <tr>
                        <td>100 à 199</td>
                        <td>Sauvegarde</td>
                        <td>STA</td>
                        <td>Remplacer la valeur à l'adresse formée par les deux derniers chiffres du code par le contenu de l'accumulateur.</td>
                    </tr>
                    <tr>
                        <td>200 à 299</td>
                        <td>Chargement</td>
                        <td>LDA</td>
                        <td>Remplacer le contenu de l'accumulateur par la valeur à l'adresse formée par les deux derniers chiffres du code.</td>
                    </tr>
                    <tr>
                        <td>300 à 399</td>
                        <td>Addition</td>
                        <td>ADD</td>
                        <td>Ajouter à l'accumulateur la valeur à l'adresse formée par les deux derniers chiffres du code.</td>
                    </tr>
                    <tr>
                        <td>400 à 499</td>
                        <td>Soustraction</td>
                        <td>SUB</td>
                        <td>Soustraire à l'accumulateur la valeur à l'adresse formée par les deux derniers chiffres du code.</td>
                    </tr>
                    <tr>
                        <td>500 à 599</td>
                        <td>Saut</td>
                        <td>BRA</td>
                        <td>Mettre dans le compteur d'instruction le nombre formée par les deux derniers chiffres du code. Ne pas incrémenter le compteur d'instruction. </td>
                    </tr>
                    <tr>
                        <td>600 à 699</td>
                        <td>Saut si zéro</td>
                        <td>BRZ</td>
                        <td>Si la valeur de l'accumulateur est égale à zéro alors faire BRA, sinon incrémenter le compteur d'instruction uniquement si le saut n'a pas eu lieu.</td>
                    </tr>
                    <tr>
                        <td>700 à 799</td>
                        <td>Saut si positif</td>
                        <td>BRP</td>
                        <td>Si la valeur de l'accumulateur est supérieure ou égale à zéro alors faire BRA, sinon incrémenter le compteur d'instruction uniquement si le saut n'a pas eu lieu.</td>
                    </tr>
                    <tr>
                        <td>800 à 899</td>
                        <td>Saut si négatif</td>
                        <td>BRN</td>
                        <td>Si la valeur de l'accumulateur est strictement inférieure à zéro alors changer le numéro d'instruction par le nombre formée par les deux derniers chiffres du code. Incrémenter le compteur d'instruction uniquement si le saut n'a pas eu lieu.</td>
                    </tr>
                </table>
                
            </div>
        </section>

        <section>
            <div class="title">Le simulateur</div>
            <div class="content">
                <p>
                    La case jaune indique la case pointée par 
                    le compteur d'instruction, c'est l'instruction qui va être effectuée
                    en cliquant sur le bouton "Instruction suivante". 
                    À chaque instruction un message apparaît pour expliquer ce qu'il vient de se produire.
                    Le bouton "Remise à zéro" met des zéros dans le compteur et dans l'accumulateur
                    mais pas la mémoire.
                </p>

                <button onclick="step();">Instruction suivante</button>
                <button onclick="reset_regs();">Remise à zéro</button>
    
                <div id="regs"> 
                    <div class="label">Compteur d'instruction</div>
                    <input id="reg_ip" type="text" readonly>

                    <div class="label">Accumulateur</div>
                    <input id="reg_acc" type="text" readonly>
                
                    <div class="label">Message de l'ordinateur</div>
                    <textarea id="log" readonly rows="3" cols="10"></textarea>
                </div>


                <button onclick="reset_mem();">Remise à zéro mémoire</button>
                <button onclick="example(0);">Exemple addition</button>
                <button onclick="example(0);">Exemple ---</button>
                <button onclick="example(0);">Exemple ---</button>
                <button onclick="example(0);">Exemple ---</button>
                <button onclick="example(0);">Exemple ---</button>
                <table id="memory"></table>
            </div>  
        </section>

    </div> 
    <script src="script.js"></script>
    <script>init();</script>

</body>
</html>

